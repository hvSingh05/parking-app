<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <style>
      .spot-box {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #000;
        border-radius: 4px;
        font-weight: bold;
      }
    </style>
  </head>
  <body class="container mt-5 mb-5 bg-dark text-white">
    <nav
      class="navbar d-flex justify-content-between"
      
    >
      <h2>Welcome, Admin</h2>
      <a href="/get_users" class="btn fs-4 text-white">Users</a>
      <a href="/summary" class="btn fs-4 text-white">Summary</a>
      <a href="/logout" class="btn btn-danger fs-4 text-white">Logout</a>
    </nav>
    <hr>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="alert alert-info mt-5">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}

    <main>
      <div class="container d-flex flex-row justify-content-between mt-5">

        <div class=" fs-2">Parking Lots</div>
        <a
        href="/add_lots"
        class="btn btn-outline-primary fs-3 text-center"
        > Add Parking Lot</a>
      </div>
      <hr>

      <div
        class="container-md d-flex flex-row flex-nowrap justify-content-evenly mt-3"
      >
        <div class="container mt-4">
          <div class="row g-4">
            
            {% for item in lot_data %}

            
            <div class="col-md-6 col-lg-4">
              <div class="card p-3 shadow">
                
                <div
                  class="d-flex justify-content-between align-items-center mb-2"
                >
                  <h5 class="mb-0">Lot Name: {{ item.lot.loc }}</h5>
                  
                  <div>
                    <a
                      href="/edit/{{ item.lot.id }}"
                      class="me-2 text-decoration-none text-primary"
                      >Edit</a
                    >
                    
                    <a
                      href="/delete_lot/{{ item.lot.id }}"
                      class="text-decoration-none text-danger"
                      >Delete</a
                    >
                  </div>
                </div>
                
                <p class="mb-3 text-muted fs-6">
                  Occupied: {{ item.occupied }} / {{ item.total }}
                </p>

                
                <div class="d-flex flex-wrap gap-2">
                  
                  {% for s in item.spots %}
                  <div
                    class="btn spot-box {% if s.status == 'O' %}btn-danger text-white {% else %}btn-success text-white{% endif %}"
                  >
                    <a href="{% if s.status == 'O' %}/spot_details/{{ s.id }} {% else %}# {% endif %}" class="btn text-decoration-none fw-bold text-white text-center">
                      {{ s.status }}
                    </a>
                  </div>
                  {% endfor %}

                  
                </div>
              </div>
            </div>
            {% endfor %}
            
            
          </div>
        </div>
      </div>
    </main>
  </body>
</html>


